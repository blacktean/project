<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.bankTransfer.mapper.AccountAuditMapper">
	<!-- 高级带条件分页查询所有用户申请 -->
	<select id="queryAllByCondition" parameterType="UserCondition" resultType="User">
		select * from t_user where 1=1
		<if test="state!=null and state!='-1'">
    	and State=#{state}
    	</if>
    	<if test="startTime!=null">
    	and applytime &gt;=#{startTime}
    	</if>
    	<if test="endTime!=null">
    	and applytime &lt;=#{endTime}
    	</if>
    	<if test="card_number!=null and card_number!=''">
    	and card_number LIKE '%'||#{card_number}||'%'
    	</if>
	</select>
	
	<!-- 通过id查询当前审核的用户信息 -->	
	<select id="queryCurrentUserById" resultType="User">
		select * from t_user where id=#{id}
	</select>
	<!-- 开户审核 -->
	<update id="CheckeditAccount">
		update t_user set state=#{updateState} where id=#{id} and user_id=#{user_id}
	
	</update>
	
	<!-- 开户成功 -->
	<insert id="addId_Card" parameterType="Card">
		insert into t_card values(SEQ_CARD_ID.nextval,#{id_card},#{start_place},
		#{currency},
		#{balance},
		#{available_balance},
		#{start_place_id},
		#{password},
		#{card_type},
		#{user_id},
		#{card_state},
		#{major_card},
		#{create_time},
		#{effective_time},
		#{register_type},
		#{max_price},
		#{bank_type}	
		)
	</insert>
</mapper>